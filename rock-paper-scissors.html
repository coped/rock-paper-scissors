<!DOCTYPE html>
<html>
    <head>
        <title>A Game of Rock, Paper, Scissors.</title>
    </head>
    <body>
        <script>
            console.log('=== WELCOME TO ROCK, PAPER, SCISSORS ===')
            let playerScore = 0;
            let computerScore = 0;
            let resultMsg = '';

            function game() {
                // Collection of playerInput and computerInput
                function computerPlay() {
                    // Function that randomly chooses between rock, paper, or scissors for computerInput
                    let inputValue = Math.random();

                    if (inputValue < (1/3)) {
                        return 'rock';
                    } else if (inputValue > (2/3)) {
                        return 'paper';
                    } else { 
                        return 'scissors';
                    }
                }
                let computerInput = computerPlay();
                let playerInput = prompt('Rock, paper, or scissors? (Five rounds)', '').toLowerCase();

                // Execution of round based on playerInput and computerInput

                function playRound(playerSelection, computerSelection) {
                    // Function that decides the winner of the round based on computerSelection and playerSelection
                    // In case of tie.
                    if (playerSelection === computerSelection) {
                        resultMsg = 'Tie!';
                    }

                    // If player chooses rock
                    else if (playerSelection === 'rock' && computerSelection === 'scissors') {
                        resultMsg = 'Win! Rock beats scissors.';
                    } else if (playerSelection === 'rock' && computerSelection === 'paper') {
                        resultMsg = 'Loss! Rock loses to paper.';
                    }

                    // If player chooses paper
                    else if (playerSelection === 'paper' && computerSelection === 'rock') {
                        resultMsg = 'Win! Paper beats rock.';
                    } else if (playerSelection === 'paper' && computerSelection === 'scissors') {
                        resultMsg = 'Loss! Paper loses to scissors.';
                    }

                    // If player chooses scissors
                    else if (playerSelection === 'scissors' && computerSelection === 'paper') {
                        resultMsg = 'Win! Scissors beat paper.';
                    } else if (playerSelection === 'scissors' && computerSelection === 'rock') {
                        resultMsg = 'Loss! Scissors loses to rock.';
                    } else {
                        alert('Invalid input.');
                        resultMsg = 'Invalid Input';
                    }
                }
                playRound(playerInput, computerInput);
                console.log(resultMsg);
            }
            // Function that computes and displays score of the game
            function gameScore() {
                if (resultMsg.charAt(0) === 'W') {
                    playerScore++;       
                } else if (resultMsg.charAt(0) === 'L') {
                    computerScore++;
                } else {}
                console.log('Score: ' + playerScore + ' — ' + computerScore);
            }
            // Looping game and gameScore functions for five rounds
            function fiveRounds() {
                for (i = 0; i < 5; i++) {
                    game();
                    gameScore();
                }
            }
            // End result messages
            function endResult() {
                if (playerScore > computerScore) {
                    console.log('=== PLAYER WINS WITH A FINAL SCORE OF ' + playerScore + ' — ' + computerScore + ' ===');
                } else if (computerScore > playerScore) {
                    console.log('=== OPPONENT WINS WITH A FINAL SCORE OF ' + playerScore + ' — ' + computerScore + ' ===');
                } else {
                    console.log('=== THIS GAME ENDS IN A TIE WITH A FINAL SCORE OF ' + playerScore + ' — ' + computerScore + ' ===');
                }
            }

            fiveRounds();
            endResult();

        </script>
    </body>
</html>